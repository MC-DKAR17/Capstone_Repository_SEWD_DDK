<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Website Template</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .nav-link.active {
            font-weight: 700;
            color: #1f2937;
            border-bottom: 2px solid #64888c;
        }
        /* START DROPDOWN FIX */
        /* Custom styles for the dropdown menu */
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            right: 0; /* Align right with the parent link */
            top: 100%;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 150px;
            z-index: 60;
            /* Removed margin-top: 0.5rem; to eliminate the gap causing the flicker */
        }
        .dropdown-item {
            display: block;
            padding: 0.75rem 1rem;
            color: #374151;
            white-space: nowrap;
        }
        .dropdown-item:hover {
            background-color: #f3f4f6;
            color: #4f46e5;
        }
        /* END DROPDOWN FIX */
        .user-message {
            background-color: #4f46e5;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
        }
        .ai-message {
            background-color: #e5e7eb;
            color: #374151;
            align-self: flex-start;
            border-bottom-left-radius: 0.25rem;
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            align-self: flex-start;
            margin-bottom: 1rem;
            background-color: #e5e7eb;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            border-bottom-left-radius: 0.25rem;
        }
        .dot {
            width: 8px;
            height: 8px;
            background-color: #6b7280;
            border-radius: 50%;
            margin: 0 2px;
            animation: bounce 0.8s infinite ease-in-out;
        }
        .dot:nth-child(2) { animation-delay: 0.1s; }
        .dot:nth-child(3) { animation-delay: 0.2s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
        }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        .input-area {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.75rem;
        }
        .input-area input {
            flex-grow: 1;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            outline: none;
        }
        .input-area button {
            background-color: #4f46e5;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .input-area button:hover {
            background-color: #4338ca;
        }
        /* Modal Styles */
        .star-rating .star {
            cursor: pointer;
            transition: color 0.2s;
        }
    </style>
</head>
<body>

    <nav class="bg-white shadow-md rounded-b-xl py-4 sticky top-0 z-50">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-gray-900 flex items-center">
                <img src="temp_logo.png" alt="Temp Logo" class="h-6 w-6 rounded-full mr-2">
                Temp
            </a>
            <div class="flex space-x-6 items-center">
                <a href="#home" class="nav-link text-gray-600 hover:text-gray-900 transition-colors duration-200">Home</a>
                <a href="#products" class="nav-link text-gray-600 hover:text-gray-900 transition-colors duration-200">Products</a>
                
                
                <div class="relative dropdown">
                    <a href="#departments" class="nav-link text-gray-600 hover:text-gray-900 transition-colors duration-200 cursor-pointer">
                        Departments
                    </a>
                    <div class="dropdown-menu">
                        <a href="#operations" class="dropdown-item nav-link">Operations Department</a>
                        <a href="#finance" class="dropdown-item nav-link">Finance Department</a>
                        <a href="#technology" class="dropdown-item nav-link">Information & Data Technology Department</a>
                        <a href="#marketing" class="dropdown-item nav-link">Sales Development & Marketing Research Department</a>
                        <a href="#security" class="dropdown-item nav-link">Human Resources & Security Department</a>
                        <a href="#legal" class="dropdown-item nav-link">Legal & Compliance Department</a>
                    </div>
                </div>
                <a href="#questions" class="nav-link text-gray-600 hover:text-gray-900 transition-colors duration-200">Questions</a>
                
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors duration-200 p-2 rounded-full hover:bg-gray-100 relative" onclick="showModal('cart-modal')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8">

        <section id="home" class="page active relative overflow-hidden">
            <div class="absolute top-0 -left-20 w-72 h-72 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
            <div class="absolute bottom-0 -right-20 w-96 h-96 bg-orange-100 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"></div>
        
            <div class="relative flex flex-col md:flex-row items-center justify-between py-16 px-8 bg-white/60 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20">
                <div class="md:w-1/2 text-center md:text-left mb-12 md:mb-0 z-10">
                    <span class="inline-block px-4 py-1 mb-6 text-sm font-bold tracking-widest text-blue-600 uppercase bg-blue-50 rounded-full">
                        Next-Gen Apparel
                    </span>
                    <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 leading-tight">
                        Climate Control. <br/>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#64888c] via-[#4f46e5] to-[#69c4d9]">
                            Made Wearable.
                        </span>
                    </h1>
                    <p class="mt-6 text-lg text-gray-600 max-w-lg leading-relaxed">
                        Discover <strong>Temp</strong>, the future of personal comfort. Our intelligent jackets automatically sense your environment to keep you perfectly cozy.
                    </p>
                    
                    <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center md:justify-start">
                        <a href="#products" class="inline-block bg-[#4f46e5] text-white font-bold py-4 px-8 rounded-full shadow-xl hover:bg-[#4338ca] hover:shadow-2xl transition-all transform hover:-translate-y-1 duration-300">
                            Explore Apparel
                        </a>
                        <a href="#our-story-anchor" class="inline-block bg-white text-gray-700 font-semibold py-4 px-8 rounded-full shadow-md border border-gray-100 hover:bg-gray-50 transition-all duration-300">
                            Our Story
                        </a>
                    </div>
                </div>
        
                <div class="md:w-1/2 flex justify-center relative">
                    <div class="absolute inset-0 bg-gradient-to-tr from-blue-400 to-orange-300 rounded-full blur-2xl opacity-20 animate-pulse"></div>
                    <div class="relative group">
                        <img src="prototype_model.png" alt="Temp Jacket" 
                             class="w-80 h-80 md:w-96 md:h-96 rounded-2xl object-cover shadow-2xl transition-transform duration-500 group-hover:scale-105">
                        <div class="absolute -bottom-4 -left-4 bg-white p-4 rounded-xl shadow-lg border border-gray-50 animate-bounce">
                            <p class="text-xs text-gray-500 uppercase font-bold tracking-tighter">Current Temp</p>
                            <p class="text-xl font-black text-[#4f46e5]">72¬∞F</p>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="relative mt-20 mb-20">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">Engineered for Every Condition</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="aspect-square bg-gray-200 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center border-2 border-dashed border-gray-300">
                        <span class="text-gray-400 font-medium">[Jacket Placeholder]</span>
                    </div>
                    <div class="aspect-square bg-gray-300 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center border-2 border-dashed border-gray-400">
                        <span class="text-gray-500 font-medium">[Vest Placeholder]</span>
                    </div>
                    <div class="aspect-square bg-gray-200 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center border-2 border-dashed border-gray-300">
                        <span class="text-gray-400 font-medium">[Pants Placeholder]</span>
                    </div>
                    <div class="aspect-square bg-gray-300 rounded-2xl overflow-hidden shadow-inner flex items-center justify-center border-2 border-dashed border-gray-400">
                        <span class="text-gray-500 font-medium">[Hoodie Placeholder]</span>
                    </div>
                </div>
            </div>
        
            <div id="our-story-anchor" class="relative bg-white rounded-3xl shadow-xl p-8 md:p-12 border border-gray-100 mt-12 mb-16 scroll-mt-24">
                <div class="max-w-3xl mx-auto">
                    <h2 class="text-4xl font-bold text-gray-900 mb-6 text-center">Our Story</h2>
                    <p class="text-lg text-gray-700 mb-8 leading-relaxed italic text-center">
                        "Our inspiration to make this idea a reality is the tumultuous weather of where we reside, Columbus, Ohio..."
                    </p>
                    <p class="text-lg text-gray-700 mb-8 leading-relaxed">
                        We often experience very "unpredictable" weather. One moment, it may be extremely cold, and then later in the day... scorching hot! We decided to build <strong>Temp</strong> to give our modern society a new perspective on apparel‚Äîmaking climate control wearable, effortless, and sustainable.
                    </p>
        
                    <div class="grid md:grid-cols-2 gap-8 mt-12 border-t border-gray-100 pt-12">
                        <div>
                            <h3 class="text-2xl font-bold text-[#4f46e5] mb-4">Our Mission</h3>
                            <p class="text-gray-600">Empowering people to move freely, live boldly, and feel perfectly comfortable no matter the weather by blending technology with sleek design.</p>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-[#4f46e5] mb-4">Our Vision</h3>
                            <p class="text-gray-600">To become the new global standard for body-temperature-regulating apparel and a leader in wearable tech.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="products" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-12">Our Products</h2>
            <div class="flex flex-wrap justify-center gap-8">
                <div id="product-jacket" class="bg-white w-full md:w-80 rounded-2xl shadow-xl p-6 flex flex-col items-center text-center transition-transform transform hover:scale-105 duration-300">
                    <img src="temp_logo.png" alt="Temporary logo in place of product image" class="w-40 h-40 rounded-full mb-4 object-cover shadow-md">
                    <h3 class="text-2xl font-bold text-gray-900 mt-4 mb-2">Heated & Cooled Jackets</h3>
                    <p class="text-gray-600 mb-4 h-16">Our flagship jacket uses a single, intelligent system to both heat and cool, providing the ultimate comfort in any climate.</p>
                    
                    <br>
                    
                    <div id="jacket-rating-display" class="flex items-center text-xl font-bold text-[#64888c] mb-4">
                        <span class="mr-2" id="jackets-rating-span">4.5</span>
                        <span class="text-yellow-500">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="text-gray-400 font-normal text-sm ml-2" id="jacket-review-count">(0 Reviews)</span>
                    </div>

                    <button onclick="showReviews('jacket', 'Heated & Cooled Jackets')" class="text-[#64888c] hover:text-[#4f46e5] text-sm font-semibold mb-4 transition-colors">
                        View All Reviews
                    </button>
                    <button class="bg-[#4f46e5] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#4338ca] transition-colors duration-300 w-full">
                        Explore More
                    </button>
                </div>
                
                <div id="product-vest" class="bg-white w-full md:w-80 rounded-2xl shadow-xl p-6 flex flex-col items-center text-center transition-transform transform hover:scale-105 duration-300">
                    <img src="temp_logo.png" alt="Temporary logo in place of product image" class="w-40 h-40 rounded-full mb-4 object-cover shadow-md">
                    <h3 class="text-2xl font-bold text-gray-900 mt-4 mb-2">Heated & Cooled Vests</h3>
                    <p class="text-gray-600 mb-4 h-16">A lighter-weight variant of our jacket, offering the same automated climate control in a more streamlined form.</p>
                    
                    <br>
                    
                    <div id="vest-rating-display" class="flex items-center text-xl font-bold text-[#64888c] mb-4">
                        <span class="mr-2" id="vests-rating-span">5.0</span>
                        <span class="text-yellow-500">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="text-gray-400 font-normal text-sm ml-2" id="vest-review-count">(0 Reviews)</span>
                    </div>

                    <button onclick="showReviews('vest', 'Heated & Cooled Vests')" class="text-[#64888c] hover:text-[#4f46e5] text-sm font-semibold mb-4 transition-colors">
                        View All Reviews
                    </button>
                    <button class="bg-[#4f46e5] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#4338ca] transition-colors duration-300 w-full">
                        Explore More
                    </button>
                </div>
		<div id="product-pants" class="bg-white w-full md:w-80 rounded-2xl shadow-xl p-6 flex flex-col items-center text-center transition-transform transform hover:scale-105 duration-300">
                    <img src="temp_logo.png" alt="Temporary logo in place of product image" class="w-40 h-40 rounded-full mb-4 object-cover shadow-md">
                    <h3 class="text-2xl font-bold text-gray-900 mt-4 mb-2">Heated & Cooled Pants</h3>
                    <p class="text-gray-600 mb-4 h-16">Need some pants instead? Look no further to purchase some heated & cooled pants to wear for any type of condition!</p>
                    
                    <br>
                    
                    <div id="pants-rating-display" class="flex items-center text-xl font-bold text-[#64888c] mb-4">
                        <span class="mr-2" id="pants-rating-span">5.0</span>
                        <span class="text-yellow-500">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="text-gray-400 font-normal text-sm ml-2" id="pants-review-count">(0 Reviews)</span>
                    </div>

                    <button onclick="showReviews('pants', 'Heated & Cooled Pants')" class="text-[#64888c] hover:text-[#4f46e5] text-sm font-semibold mb-4 transition-colors">
                        View All Reviews
                    </button>
                    <button class="bg-[#4f46e5] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#4338ca] transition-colors duration-300 w-full">
                        Explore More
                    </button>
                </div>
		<div id="product-hoodie" class="bg-white w-full md:w-80 rounded-2xl shadow-xl p-6 flex flex-col items-center text-center transition-transform transform hover:scale-105 duration-300">
                    <img src="temp_logo.png" alt="Temporary logo in place of product image" class="w-40 h-40 rounded-full mb-4 object-cover shadow-md">
                    <h3 class="text-2xl font-bold text-gray-900 mt-4 mb-2">Heated & Cooled Hoodies</h3>
                    <p class="text-gray-600 mb-4 h-16">If you have a preference for hoodies instead, then no problem. We've got it for you.</p>
                    
                    <br>
                    
                    <div id="hoodie-rating-display" class="flex items-center text-xl font-bold text-[#64888c] mb-4">
                        <span class="mr-2" id="hoodies-rating-span">5.0</span>
                        <span class="text-yellow-500">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="text-gray-400 font-normal text-sm ml-2" id="hoodie-review-count">(0 Reviews)</span>
                    </div>

                    <button onclick="showReviews('hoodie', 'Heated & Cooled Hoodies')" class="text-[#64888c] hover:text-[#4f46e5] text-sm font-semibold mb-4 transition-colors">
                        View All Reviews
                    </button>
                    <button class="bg-[#4f46e5] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#4338ca] transition-colors duration-300 w-full">
                        Explore More
                    </button>
                </div>
            </div>
        </section>
        
        <section id="jackets-page" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">All Heated & Cooled Jackets</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <p class="text-lg text-gray-700">This page will showcase the 10 different types of jackets you mentioned (e.g., Lite, Pro, Stealth, etc.).</p>
                <a href="#products" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to All Products</a>
            </div>
        </section>

        <section id="vests-page" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">All Heated & Cooled Vests</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <p class="text-lg text-gray-700">This page will showcase the various vests available.</p>
                <a href="#products" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to All Products</a>
            </div>
        </section>

        <section id="pants-page" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">All Heated & Cooled Pants</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <p class="text-lg text-gray-700">This page will showcase the various pants available.</p>
                <a href="#products" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to All Products</a>
            </div>
        </section>

        <section id="hoodies-page" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">All Heated & Cooled Hoodies</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <p class="text-lg text-gray-700">This page will showcase the various hoodies available.</p>
                <a href="#products" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to All Products</a>
            </div>
        </section>

        <section id="departments" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-12">Our Departments</h2>
            <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                <p class="text-lg text-gray-700 mb-6">
                    Click on a department below or use the dropdown menu in the navigation bar to learn more!
                </p>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto">
                    <a href="#operations" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">Operations ‚öôÔ∏è</a>
                    <a href="#finance" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">Finance üí∏</a>
                    <a href="#technology" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">Technology üßë‚Äçüíª</a>
                    <a href="#marketing" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">Marketing üìà</a>
                    <a href="#security" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">HR & Security üõ°Ô∏è</a>
                    <a href="#legal" class="inline-block text-[#4f46e5] font-semibold hover:underline text-center p-2 rounded-lg bg-gray-50">Legal & Compliance üìÉ</a>
                </div>
            </div>
        </section>
        
        <section id="operations" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Operations Department ‚öôÔ∏è</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Logistics and Efficiency</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The Operations team manages the daily heartbeat of Temp. They oversee the supply chain, production logistics, and optimize internal processes to ensure our automated apparel is manufactured efficiently and delivered to our customers on time.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Bill Gates</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Executive Officer (CEO)</p>
                        <p class="text-sm text-gray-500 mt-2">The CEO sets the company's overall vision and strategic direction, serving as the primary decision-maker and public face of Temp.</p>
                        <br>
                        <p class="text-xl font-semibold text-[#4f46e5]">Connor Fredericy</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Operating Officer (COO)</p>
                        <p class="text-sm text-gray-500 mt-2">The COO is responsible for overseeing the company's day-to-day operational functions and driving efficiency.</p>
                        <br>
                        <p class="text-xl font-semibold text-[#4f46e5]">Tom Carey</p>
                        <p class="text-lg text-gray-700 font-medium">Office Manager</p>
                        <p class="text-sm text-gray-500 mt-2">The Office Manager handles administrative operations, ensuring the smooth, organized, and efficient functioning of the primary office location and staff support services.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>

        <section id="finance" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Finance Department üí∏</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Fiscal Strategy and Reporting</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The Finance team ensures the fiscal health of Temp. They handle budgeting, financial reporting, investment strategies, and risk management to support our long-term growth and stability.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Caden Fike</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Financial Officer (CFO)</p>
                        <p class="text-sm text-gray-500 mt-2">The CFO oversees all financial planning and is responsible for the company's overall financial management.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>

        <section id="technology" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Information & Data Technology Department üßë‚Äçüíª</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">IT Infrastructure and Data Security</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The IT Department maintains the technological backbone of Temp. They manage our data infrastructure, ensure robust cybersecurity, and develop the internal software systems that drive our business operations and website functionality.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Danielius Karalius</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Technology Officer (CTO)</p>
                        <p class="text-sm text-gray-500 mt-2">The CTO guides the company's technology strategy and manages all information systems.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>

        <section id="marketing" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Sales Development & Marketing Research Department üìà</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Brand Strategy and Outreach</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The Marketing team is responsible for building the Temp brand and spreading the word about our revolutionary apparel. They manage digital campaigns, social media, content creation, and strategic partnerships to connect with customers globally.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Ella Morell</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Marketing & Sales Officer (CMSO)</p>
                        <p class="text-sm text-gray-500 mt-2">The CMSO directs all marketing efforts, from brand identity to customer acquisition strategies.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>

        <section id="security" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Human Resources & Security Department üõ°Ô∏è</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Talent Management and Company Safety</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The HR and Security team handles all personnel matters, including recruiting, employee development, and managing company policies. They also oversee physical and data security protocols to protect our people and assets.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Braeden Huth</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Human Resources Officer (CHRO)</p>
                        <p class="text-sm text-gray-500 mt-2">This role is key to maintaining a safe, compliant, and productive work environment for all employees.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>

        <section id="legal" class="page hidden">
            <h2 class="text-4xl font-bold text-center mb-8">Legal & Compliance Department üìÉ</h2>
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-2xl font-bold text-gray-900 mb-4">Regulatory Oversight and Corporate Governance</h3>
                <p class="text-lg text-gray-700 mb-4">
                    The Legal and Compliance team manages all legal affairs, ensuring the company adheres to national and international regulations. They protect our intellectual property and advise on contracts and corporate law.
                </p>
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Department Staff</h3>
                    <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                        <p class="text-xl font-semibold text-[#4f46e5]">Braxtyn Ford</p>
                        <p class="text-lg text-gray-700 font-medium">Chief Legal Officer (CLO)</p>
                        <p class="text-sm text-gray-500 mt-2">The CLO is responsible for overseeing all legal and regulatory matters affecting the company.</p>
                    </div>
                </div>
                <a href="#departments" class="mt-4 inline-block text-[#4f46e5] font-semibold hover:underline">‚Üê Back to Departments</a>
            </div>
        </section>
        <section id="questions" class="page hidden">
            <div class="max-w-4xl mx-auto px-4 py-12">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">How can we help?</h2>
                    <p class="text-lg text-gray-600">Have questions about your intelligent apparel? Our team is here to ensure you stay perfectly comfortable.</p>
                </div>
        
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-3xl shadow-xl p-8 border border-gray-100 flex flex-col items-center text-center transition-transform hover:scale-[1.02] duration-300">
                        <div class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-[#4f46e5]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-2">Email Support</h3>
                        <p class="text-gray-500 mb-6 leading-relaxed">For technical help, order tracking, or general inquiries, reach out to us anytime.</p>
                        <a href="mailto:support@tempwear.com" class="text-xl font-bold text-[#4f46e5] hover:text-[#4338ca] transition-colors underline decoration-2 underline-offset-4">
                            support@tempwear.com
                        </a>
                        <p class="mt-4 text-xs text-gray-400 uppercase tracking-widest font-semibold">Response time: Within 24 hours</p>
                    </div>
        
                    <div class="bg-white rounded-3xl shadow-xl p-8 border border-gray-100 transition-transform hover:scale-[1.02] duration-300">
                        <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                            <span class="mr-2">üí°</span> Quick Answers
                        </h3>
                        <div class="space-y-6">
                            <div>
                                <h4 class="font-bold text-gray-800 text-sm uppercase tracking-tight">Shipping Policy</h4>
                                <p class="text-gray-600 text-sm mt-1">We offer standard shipping (5-7 business days) to all major regions.</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800 text-sm uppercase tracking-tight">Returns</h4>
                                <p class="text-gray-600 text-sm mt-1">Enjoy a hassle-free 30-day return policy for all unworn items.</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800 text-sm uppercase tracking-tight">Our Mission</h4>
                                <p class="text-gray-600 text-sm mt-1">Redefining personal comfort through intelligent climate control technology.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-12 bg-[#64888c]/10 rounded-2xl p-6 text-center border border-[#64888c]/20">
                    <p class="text-[#64888c] font-medium italic">"The future of personal comfort is just an email away."</p>
                </div>
            </div>
        </section>

    </main>

    <div id="review-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4" onclick="if(event.target.id === 'review-modal') hideModal('review-modal')">
        <div class="bg-white w-full max-w-2xl rounded-xl shadow-2xl p-6 max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center pb-4 border-b border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800" id="review-modal-title">Customer Reviews</h3>
                <button onclick="hideModal('review-modal')" class="text-gray-500 hover:text-gray-700 transition-colors p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>

            <div id="reviews-list" class="my-4 overflow-y-auto flex-grow space-y-4">
                <div class="text-center py-12 text-gray-400 italic animate-pulse" id="no-reviews-message">
                    Gathering thoughts from our community...
                </div>
            </div>

            <div class="pt-4 border-t border-gray-200">
                <h4 class="text-xl font-semibold mb-3 text-gray-800">Want to leave a review?</h4>
                <div class="bg-blue-50 p-4 rounded-lg text-center">
                    <a id="google-form-link" 
                       href="#" 
                       target="_blank" 
                       class="text-lg font-bold text-[#4f46e5] hover:text-[#4338ca] hover:underline transition-colors duration-200">
                        Leave a review on this Google Form!
                    </a>
                    <p class="text-sm text-gray-600 mt-1">This will open the product-specific form in a new tab.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="cart-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 p-4" onclick="if(event.target.id === 'cart-modal') hideModal('cart-modal')">
        <div class="bg-white w-full max-w-md rounded-xl shadow-2xl p-6" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center pb-4 border-b border-gray-200">
                <h3 class="text-2xl font-bold text-gray-800">Shopping Cart</h3>
                <button onclick="hideModal('cart-modal')" class="text-gray-500 hover:text-gray-700 transition-colors p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="py-6 text-center text-gray-600">
                Your cart is currently empty. The full cart functionality will be added in a future update!
            </div>
            <button onclick="hideModal('cart-modal')" class="mt-4 bg-[#4f46e5] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#4338ca] transition-colors duration-300 w-full">
                Continue Shopping
            </button>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-8 rounded-t-xl mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 Temp. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        // Firebase Imports (Omitted for brevity, no changes)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, query, where, addDoc, onSnapshot, serverTimestamp, setLogLevel, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global Variables
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db, auth, userId = null;
        let currentProductId = null;
        let currentProductTitle = '';
        let selectedRating = 0; // For new review submission

        // Product Identifiers
        const PRODUCT_JACKET = 'jacket';
        const PRODUCT_VEST = 'vest';
        
        // --- Google Form URLs (Customize these with your actual links!) ---
        const GOOGLE_FORM_URLS = {
            'jacket': 'https://docs.google.com/forms/d/e/1FAIpQLSdp9K5z3Io9sFrngdZHbZ9JmI0eb3GBxOI8Ex4LUatv5zrqhw/viewform?usp=header',
            'vest': 'https://docs.google.com/forms/d/e/1FAIpQLSdDeXkC73ch8fl6eDTEDVI93vtRbCDo9YaP4u7voOwmB1UfgA/viewform?usp=header',
            'pants': 'https://docs.google.com/forms/d/e/1FAIpQLSdaX2VX46Eb14WE7PP5YpPsCxWWUupeaTIwP0CV-QoKs-kasw/viewform?usp=header',
            'hoodie': 'https://docs.google.com/forms/d/e/1FAIpQLSfLKEBgFZnWvFVrJI4HsK9SH78IkjemO1RJvwqNoyldOb0OFA/viewform?usp=header'
        };

        // --- Firebase Initialization (Omitted for brevity, no changes) ---
        async function initializeFirebase() {
            if (!firebaseConfig) {
                console.error("Firebase config is missing.");
                return;
            }

            try {
                // Initialize Firebase services
                setLogLevel('Debug');
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // Sign in logic
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Wait for auth state to stabilize and set userId
                await new Promise(resolve => onAuthStateChanged(auth, user => {
                    if (user) {
                        userId = user.uid;
                    } else {
                        // Fallback to anonymous ID if sign-in fails
                        userId = 'guest-' + crypto.randomUUID();
                    }
                    console.log("Firebase initialized. User ID:", userId);
                    resolve();
                }));
                
                // Start listening for product reviews once auth is complete
                setupReviewListeners();

            } catch (error) {
                console.error("Error during Firebase initialization:", error);
            }
        }

        // --- Review Logic (Omitted for brevity, no changes) ---
        function getReviewsCollectionRef() {
            // Public collection path for shared product data/reviews
            return collection(db, `artifacts/${appId}/public/data/product_reviews`);
        }

        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += `<span class="text-xl ${i <= rating ? 'text-yellow-500' : 'text-gray-300'}">‚òÖ</span>`;
            }
            return stars;
        }

        function calculateAverageRating(reviews) {
            if (reviews.length === 0) return { avg: 0, count: 0 };
            const total = reviews.reduce((sum, review) => sum + review.rating, 0);
            return {
                avg: (total / reviews.length).toFixed(1),
                count: reviews.length
            };
        }

        function updateProductRatingDisplay(productId, avg, count) {
            const displayEl = document.getElementById(`${productId}-rating-display`);
            const countEl = document.getElementById(`${productId}-review-count`);

            if (displayEl && countEl) {
                const ratingHtml = `
                    <span class="mr-2">${avg}</span>
                    <span class="text-yellow-500">${renderStars(Math.round(avg))}</span>
                    <span class="text-gray-400 font-normal text-sm ml-2" id="${productId}-review-count">(${count} Review${count !== 1 ? 's' : ''})</span>
                `;
                displayEl.innerHTML = ratingHtml;
                // Re-adding the element that was replaced:
                displayEl.querySelector(`#${productId}-review-count`).textContent = `(${count} Review${count !== 1 ? 's' : ''})`;
            }
        }

        function setupReviewListeners() {
            if (!db) return;

            const reviewsQuery = query(getReviewsCollectionRef());

            onSnapshot(reviewsQuery, (snapshot) => {
                const allReviews = snapshot.docs.map(doc => doc.data());

                const jacketReviews = allReviews.filter(r => r.productId === PRODUCT_JACKET);
                const vestReviews = allReviews.filter(r => r.productId === PRODUCT_VEST);

                // Update Jacket
                const { avg: jacketAvg, count: jacketCount } = calculateAverageRating(jacketReviews);
                updateProductRatingDisplay(PRODUCT_JACKET, jacketAvg, jacketCount);

                // Update Vest
                const { avg: vestAvg, count: vestCount } = calculateAverageRating(vestReviews);
                updateProductRatingDisplay(PRODUCT_VEST, vestAvg, vestCount);

                // Re-render reviews in modal if it's currently open for this product
                if (currentProductId) {
                    displayReviews(currentProductId, currentProductTitle, allReviews);
                }
            }, (error) => {
                console.error("Error listening to reviews:", error);
            });
        }

        window.showReviews = function(productId, productTitle) {
            currentProductId = productId;
            currentProductTitle = productTitle;
    
            // Set the Modal Title
            document.getElementById('review-modal-title').textContent = `Reviews for ${productTitle}`;
    
            // Set the Product-Specific Google Form Link
            const formLinkEl = document.getElementById('google-form-link');
            const formUrl = GOOGLE_FORM_URLS[productId];
            if (formLinkEl && formUrl) formLinkEl.href = formUrl;

            // 1. Show the loading message first
            const reviewsListEl = document.getElementById('reviews-list');
            reviewsListEl.innerHTML = `
                <div class="text-center py-12 text-gray-400 italic animate-pulse" id="loading-placeholder">
                    Sourcing latest feedback...
                </div>`;

            showModal('review-modal');

            // 2. Add the delay to show "fake" data
            setTimeout(() => {
                // Only show fake data if the loading placeholder is still there 
                // (This prevents overwriting real Firebase data if it loads faster)
                const placeholder = document.getElementById('loading-placeholder');
                if (placeholder) {
                    injectFakeReviews(productId, productTitle);
                }
            }, 1500); // 1.5 second delay
        }

        function injectFakeReviews(productId, productTitle) {
            const reviewsListEl = document.getElementById('reviews-list');
    
            // Simulated data tailored to your Medina, Ohio story
            const fakeData = [
                {
                    rating: 5,
                    date: "Feb 3, 2026",
                    user: "Sarah M.",
                    text: `Finally! Something that handles the Medina weather. I wore this to the Square and stayed perfectly warm.`
                },
                {
                    rating: 4,
                    date: "Jan 28, 2026",
                    user: "Jason R.",
                    text: `Having a dynamic piece of clothing that can swap between the heat and cold, without having to change, is extremely handy!`
                }
            ];

            reviewsListEl.innerHTML = ''; // Clear the loader

            fakeData.forEach(review => {
                const reviewEl = document.createElement('div');
                reviewEl.className = 'p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-100';
                reviewEl.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <div class="font-bold text-gray-800">${renderStars(review.rating)}</div>
                        <div class="text-xs text-gray-500">${review.date}</div>
                    </div>
                    <p class="text-gray-700 text-sm italic">"${review.text}"</p>
                    <p class="text-xs text-gray-400 mt-2">‚Äî Verified Buyer: ${review.user}</p>
                `;
                reviewsListEl.appendChild(reviewEl);
            });
        }

        function displayReviews(productId, productTitle, allReviews) {
            const reviewsListEl = document.getElementById('reviews-list');
            
            // Only update if the modal is currently showing reviews for this product
            if (currentProductId !== productId) return;

            const filteredReviews = allReviews.filter(r => r.productId === productId).sort((a, b) => b.timestamp?.seconds - a.timestamp?.seconds);

            reviewsListEl.innerHTML = '';

            if (filteredReviews.length === 0) {
                reviewsListEl.innerHTML = '<div class="text-center text-gray-500 py-8">Be the first to leave a review!</div>';
                return;
            }

            filteredReviews.forEach(review => {
                const date = review.timestamp?.toDate ? review.timestamp.toDate().toLocaleDateString() : 'N/A';
                const reviewEl = document.createElement('div');
                reviewEl.classList.add('p-4', 'bg-gray-50', 'rounded-lg', 'shadow-sm');
                reviewEl.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <div class="font-bold text-gray-800">${renderStars(review.rating)}</div>
                        <div class="text-xs text-gray-500">${date}</div>
                    </div>
                    <p class="text-gray-700">${review.reviewText}</p>
                    <p class="text-xs text-gray-500 mt-2">By: User ID: ${review.authorId.substring(0, 10)}...</p>
                `;
                reviewsListEl.appendChild(reviewEl);
            });
        }

        window.submitReview = async function() {
            const reviewText = document.getElementById('review-text-input').value.trim();
            const messageEl = document.getElementById('review-message');
            messageEl.textContent = '';

            if (!userId) {
                messageEl.textContent = 'Error: Cannot submit review without a user ID.';
                return;
            }

            if (selectedRating === 0) {
                messageEl.textContent = 'Please select a star rating.';
                return;
            }

            if (reviewText.length < 10) {
                messageEl.textContent = 'Please write a more descriptive review (min 10 characters).';
                return;
            }

            try {
                // Check if the user already submitted a review. We'll allow multiple for simplicity here.
                
                await addDoc(getReviewsCollectionRef(), {
                    productId: currentProductId,
                    rating: selectedRating,
                    reviewText: reviewText,
                    authorId: userId,
                    timestamp: serverTimestamp()
                });

                document.getElementById('review-text-input').value = '';
                selectedRating = 0;
                document.getElementById('star-rating-input').innerHTML = renderStars(0); // Reset stars
                messageEl.textContent = 'Review submitted successfully! Thank you.';
                messageEl.classList.remove('text-red-500');
                messageEl.classList.add('text-green-600');

            } catch (error) {
                console.error("Error submitting review:", error);
                messageEl.textContent = 'Failed to submit review. Please try again.';
                messageEl.classList.remove('text-green-600');
                messageEl.classList.add('text-red-500');
            }
        }

        // --- Utility Functions (Omitted for brevity, no changes) ---

        window.showModal = function(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        window.hideModal = function(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        // --- Main App Setup ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeFirebase();

            // --- Page Navigation Logic ---
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            
            // Added new department pages to map
            const pageMap = {
                '#home': 'home',
                '#products': 'products',
                '#about': 'about',
                '#departments': 'departments',
                '#questions': 'questions',
                '#jackets-page': 'jackets-page',
                '#vests-page': 'vests-page',
                '#pants-page': 'pants-page',
                '#hoodies-page': 'hoodies-page',
                '#operations': 'operations',
                '#finance': 'finance',
                '#technology': 'technology',
                '#marketing': 'marketing',
                '#security': 'security',
                '#legal': 'legal'
            };

            function showPage(pageId) {
                pages.forEach(page => page.classList.add('hidden'));
                const currentPage = document.getElementById(pageId);
                if (currentPage) {
                    currentPage.classList.remove('hidden');
                }
                
                // Active link logic
                navLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    const linkPageId = href ? href.substring(1) : '';

                    // The main navigation link for 'Departments' should be active if we are on any department page
                    const mainDepartmentLink = document.querySelector('.dropdown > a[href="#departments"]');
                    const isDepartmentPage = ['departments', 'operations', 'finance', 'technology', 'marketing', 'security', 'legal'].includes(pageId);

                    if (mainDepartmentLink) {
                        if (isDepartmentPage && link === mainDepartmentLink) {
                             mainDepartmentLink.classList.add('active');
                        } else if (!isDepartmentPage && link === mainDepartmentLink) {
                            mainDepartmentLink.classList.remove('active');
                        }
                    }

                    // Individual page link logic for all links
                    if (linkPageId === pageId) {
                        link.classList.add('active');
                    } else if (linkPageId !== 'departments' && isDepartmentPage) {
                        // Keep only the currently active department sub-link highlighted, remove others
                        link.classList.remove('active');
                    } else if (!isDepartmentPage && linkPageId !== 'departments') {
                        link.classList.remove('active');
                    }
                });
            }

            function handleHashChange() {
                const hash = window.location.hash;

                // If the hash is for the "Our Story" anchor, let the browser 
                // scroll naturally and don't try to switch "pages".
                if (hash === '#our-story-anchor') {
                    return; 
                }

                const pageId = hash.substring(1) || 'home';
                showPage(pageId);
            }

            window.addEventListener('hashchange', handleHashChange);
            // Initial page load
            handleHashChange();
        });
    </script>
</body>
</html>